<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur de QRcodes</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section>
        <label>Entrez un texte ou un lien :</label>
        <input type="text" id="qr_input">
        <button onclick="ajouterElement()">Ajouter</button>
    </section>
    <section>
        <h2>Liste</h2>
        <ul id="qr_liste"></ul>
        <button onclick="genererTableau()">Générer</button>
    </section>
    <section>
        <h2>QR Codes</h2>
        <div id="qr_tableau"></div>
    </section>
    <script src="qrcode.min.js"></script>
    <script type="text/javascript">
        var qr_liste = [];

        function ajouterElement() {
            var qr_input = document.getElementById("qr_input");
            var qr_liste_ul = document.getElementById("qr_liste");
            var qr_liste_li = document.createElement("li");
            qr_liste_li.textContent = qr_input.value;
            qr_liste_ul.appendChild(qr_liste_li);
            qr_liste.push(qr_input.value);
            qr_input.value = "";
        }

        /*function genererTableau() {
            var qr_tableau_div = document.getElementById("qr_tableau");
            qr_tableau_div.innerHTML = "";
            for (var i = 0; i < qr_liste.length; i++) {
                var qr_tableau_qr = document.createElement("div");
                new QRCode(qr_tableau_qr, qr_liste[i]);
                qr_tableau_div.appendChild(qr_tableau_qr);
            }
        }*/
        function genererTableau() {
            var qrcodes = document.querySelectorAll(".qr_code");
            var table = "<table>";
            for (var i = 0; i < qrcodes.length; i++) {
                var qr_code_data = qrcodes[i].innerHTML;
                var qr_code_element = document.createElement("div");
                new QRCode(qr_code_element, qr_code_data);
                qrcodes[i].appendChild(qr_code_element.firstChild);
                table += "<tr><td>" + (i+1) + "</td><td>" + qr_code_data + "</td></tr>";
            }
            table += "</table>";
            document.querySelector("#tableau_qr").innerHTML = table;
        }
    </script>
</body>
</html>